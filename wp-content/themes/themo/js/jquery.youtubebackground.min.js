"function"!=typeof Object.create&&(Object.create=function(obj){function F(){}return F.prototype=obj,new F}),function($,window,document){"use strict";var loadAPI=function(callback){var tag=document.createElement("script"),head=document.getElementsByTagName("head")[0];tag.src="http://www.youtube.com/iframe_api",head.appendChild(tag),head=null,tag=null,iframeIsReady(callback)},iframeIsReady=function(callback){"undefined"==typeof YT&&"undefined"==typeof window.loadingPlayer?(window.loadingPlayer=!0,window.dfd=$.Deferred(),window.onYouTubeIframeAPIReady=function(){window.onYouTubeIframeAPIReady=null,window.dfd.resolve("done"),callback()}):"object"==typeof YT?callback():window.dfd.done(function(name){callback()})},YTPlayer={player:null,defaults:{ratio:16/9,videoId:"LSmgKRx5pBo",mute:!0,repeat:!0,width:$(window).width(),playButtonClass:"YTPlayer-play",pauseButtonClass:"YTPlayer-pause",muteButtonClass:"YTPlayer-mute",volumeUpClass:"YTPlayer-volume-up",volumeDownClass:"YTPlayer-volume-down",start:0,pauseOnScroll:!1,fitToBackground:!0,playerVars:{modestbranding:1,autoplay:1,controls:0,showinfo:0,wmode:"transparent",branding:0,rel:0,autohide:0},events:null},init:function(node,userOptions){var self=this;return self.userOptions=userOptions,self.$body=$("body"),self.$node=$(node),self.$window=$(window),self.defaults.events={onReady:function(e){self.onPlayerReady(e),self.options.pauseOnScroll&&self.pauseOnScroll(),"function"==typeof self.options.callback&&self.options.callback.call(this)},onStateChange:function(e){1===e.data?self.$node.addClass("loaded"):0===e.data&&self.options.repeat&&self.player.seekTo(self.options.start)}},self.options=$.extend(!0,{},self.defaults,self.userOptions),self.options.height=Math.ceil(self.options.width/self.options.ratio),self.ID=(new Date).getTime(),self.holderID="YTPlayer-ID-"+self.ID,self.options.fitToBackground?self.createBackgroundVideo():self.createContainerVideo(),self.$window.on("resize.YTplayer"+self.ID,function(){self.resize(self)}),loadAPI(self.onYouTubeIframeAPIReady.bind(self)),self.resize(self),self},pauseOnScroll:function(){var self=this;self.$window.on("scroll.YTplayer"+self.ID,function(){var state=self.player.getPlayerState();1===state&&self.player.pauseVideo()}),self.$window.scrollStopped(function(){var state=self.player.getPlayerState();2===state&&self.player.playVideo()})},createContainerVideo:function(){var self=this,$YTPlayerString=$('<div id="ytplayer-container'+self.ID+'" >                                    <div id="'+self.holderID+'" class="ytplayer-player"></div>                                     </div>                                     <div id="ytplayer-shield"></div>');self.$node.append($YTPlayerString),self.$YTPlayerString=$YTPlayerString,$YTPlayerString=null},createBackgroundVideo:function(){var self=this,$YTPlayerString=$('<div id="ytplayer-container'+self.ID+'" class="ytplayer-container background">                                    <div id="'+self.holderID+'" class="ytplayer-player"></div>                                    </div>                                    <div id="ytplayer-shield"></div>');self.$node.find("img").fadeOut(),self.$node.append($YTPlayerString),self.$YTPlayerString=$YTPlayerString,$YTPlayerString=null},resize:function(self){var container=$(window);self.options.fitToBackground||(container=self.$node);var pWidth,pHeight,width=container.width(),height=container.height(),$YTPlayerPlayer=$("#"+self.holderID);width/self.options.ratio<height?(pWidth=Math.ceil(height*self.options.ratio),$YTPlayerPlayer.width(pWidth).height(height).css({left:(width-pWidth)/2,top:0})):(pHeight=Math.ceil(width/self.options.ratio),$YTPlayerPlayer.width(width).height(pHeight).css({left:0,top:0})),$YTPlayerPlayer=null,container=null},onYouTubeIframeAPIReady:function(){var self=this;self.player=new window.YT.Player(self.holderID,self.options)},onPlayerReady:function(e){this.options.mute&&e.target.mute(),e.target.playVideo()},getPlayer:function(){return this.player},destroy:function(){var self=this;self.$node.removeData("yt-init").removeData("ytPlayer").removeClass("loaded"),self.$YTPlayerString.remove(),$(window).off("resize.YTplayer"+self.ID),$(window).off("scroll.YTplayer"+self.ID),self.$body=null,self.$node=null,self.$YTPlayerString=null,self.player.destroy(),self.player=null}};$.fn.scrollStopped=function(callback){var $this=$(this),self=this;$this.scroll(function(){$this.data("scrollTimeout")&&clearTimeout($this.data("scrollTimeout")),$this.data("scrollTimeout",setTimeout(callback,250,self))})},$.fn.YTPlayer=function(options){return this.each(function(){var el=this;$(el).data("yt-init",!0);var player=Object.create(YTPlayer);player.init(el,options),$.data(el,"ytPlayer",player)})}}(jQuery,window,document);